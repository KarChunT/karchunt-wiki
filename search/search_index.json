{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to KarChunT Wiki","text":"<p>Hi, I'm Kar Chun! I'm an Infrastructure and DevOps Engineer at Intel. Welcome to my website, visit my website for documentation, tutorials, blog and more. I love to code and design software architecture.</p> <p>My ambition is to develop a new technology that can revolutionize the world. As part of my motivation to inspire people, this site shares what I have learned and studied previously. It would be the greatest thing I could ever hope for if someone looked at me and said, <code>Thanks to you, I didn't give up</code>\ud83e\udd73.</p> <p>You can contact me via these channels!</p> <ul> <li>Website</li> <li>GitHub</li> <li>LinkedIn</li> <li>Newsletter</li> <li>Email</li> </ul> <p>Here is my Credly profile, where you can find my certifications and badges. It is my hope that you can find something useful or helpful here. Thank you!</p>"},{"location":"ssh/host-configuration/","title":"Host Configuration","text":""},{"location":"ssh/host-configuration/#host-specific-configuration-file","title":"Host Specific Configuration file","text":"<p>Create a config filename <code>config</code> in your local <code>~/.ssh</code> directory.</p> <pre><code>nano ~/.ssh/config\n</code></pre> <p>You can define each individual SSH configuration options into this file. You can find all the SSH configuration options from this ssh_config.</p> ~/.ssh/config<pre><code>Host * # all hosts\n  ServerAliveInterval 180\n  StrictHostKeyChecking no\n  UserKnownHostsFile /dev/null\n\nHost &lt;remove-alias&gt;\n  HostName &lt;remote-host/ipaddress&gt;\n  Port &lt;port-number&gt;\n  User &lt;username&gt;\n\nHost &lt;remote-alias&gt;\n  HostName &lt;remote-host/ipaddress&gt;\n  Port &lt;port-number&gt;\n\n# sample\nHost server1\n  HostName 192.168.0.1\n  Port 22\n  User karchunt\n</code></pre> Declaration Description Host * All hosts Host <code>remote-alias</code> You can name <code>remote-alias</code> whatever you want ServerAliveInterval If set 180, then every 3 minutes, send a packet to the server to let it know not to close the connection StrictHostKeyChecking If set \"no\", it will disable host checking and it will auto-add new hosts to the <code>known_hosts</code> file (fingerprint) directly UserKnownHostsFile Not warn on new or changed hosts HostName remove host name or IP Address Port Port number to access User Username used to access"},{"location":"ssh/local-tunneling/","title":"Local Tunneling","text":"More Information <p>A Visual Guide to SSH Tunnels: Local and Remote Port Forwarding</p>"},{"location":"ssh/local-tunneling/#local-tunneling-to-a-server","title":"Local tunneling to a server","text":"<p>Traffic between the localhost and remote host can be tunneled via SSH connections. To establish a local tunnel on your remote server, use <code>-L</code> parameter when connecting and must provide</p> <ul> <li>Local port for accessing the tunneled connection</li> <li>Remote host IP/name</li> <li>Remote host port</li> </ul> <p>For general usage, connect to <code>10.0.0.12</code> on port 80 on your remote host, then your local machine is able to ping or make the connection to the remote host through port 8080.</p> <pre><code>ssh -f -N -L &lt;local-port&gt;:&lt;remote-host-ip-address/name&gt;:&lt;remote-port&gt; &lt;username&gt;@&lt;host&gt;\n# example\nssh -L 8080:10.0.0.12:80 username@host\n</code></pre> <p>Now if you go to your browser/curl to <code>localhost:8080</code>, you are able to see the content that hosted at <code>10.0.0.12:80</code>.</p> Parameters Description -f let SSH go into the background before executing -N does not open a shell or execute a program on the remote side -L establish a local tunnel to your remote server <p>If you want to terminate the background connection, you have to find the PID and kill it.</p> <pre><code>ps aux | grep &lt;local-port&gt;\nkill &lt;process-id&gt;\n</code></pre> <pre><code>Output\n1001      5965  0.0  0.0  48168  1136 ?        Ss   12:28   0:00 ssh -f -N -L 8888:your_domain:80 username@remote_host\n1001      6113  0.0  0.0  13648   952 pts/2    S+   12:37   0:00 grep --colour=auto 8888\n</code></pre> <pre><code>kill 5965\n</code></pre>"},{"location":"ssh/local-tunneling/#local-tunneling-local-network","title":"Local tunneling local network","text":"<p>You can tunnel remote host local network to your local. Here is the animation diagram of the local network web server and common SSH server.</p> <p></p> <pre><code>ssh -L 8080:localhost:8080 user@server\n</code></pre>"},{"location":"ssh/local-tunneling/#local-tunneling-private-network","title":"Local tunneling private network","text":"<p>You can tunnnel remote host private network to your local. Here is the animation diagram of the private network web server and common SSH server.</p> <p></p> <pre><code>ssh -L &lt;local-port&gt;:&lt;server-ip-address&gt;:&lt;server-port&gt; &lt;username&gt;@&lt;bastion-server-ip-address&gt;\nssh -L 8080:10.0.0.12:8080 user@bastion\n</code></pre>"},{"location":"ssh/play-with-ssh-keys/","title":"Play with SSH Keys","text":""},{"location":"ssh/play-with-ssh-keys/#generating-an-ssh-key-pair","title":"Generating an SSH Key Pair","text":"<p>Your first step should be creating a new SSH key pair on your computer, then you can connect without a password to a remote server.</p> <pre><code># You can leave those settings as default by pressing ENTER\nssh-keygen\nssh-keygen -t dsa -C \"Comment\" -b 4096\n\n# make sure your private key file exists\nssh-keygen -p # remove or change passphrase on private key\nssh-keygen -l # display the SSH key fingerprint\n</code></pre> <p>For your information, private key's passphrase is just to secure the private key, so that no one will gain access to the remote server even they have your private key, but you have to enter your private key's passphrase everytime if you want to initiate a SSH connection, but this can avoid by using SSH agent.</p> <p>It will generate <code>id_rsa</code> and <code>id_rsa.pub</code> key file to <code>/home/&lt;username&gt;/.ssh</code> hidden directory.</p> <ul> <li><code>id_rsa</code> = private key</li> <li><code>id_rsa.pub</code> = public key</li> </ul>"},{"location":"ssh/play-with-ssh-keys/#optional-parameters","title":"Optional Parameters","text":"Parameters Description Example -t Type of cryptographic algorithms. Default is RSA. rsa, dsa, ecdsa, ed25519 -C Comment simple comment -b The number of bits, default is 2048 bits 4096 -p Removing or changing passphrase on private key (make sure private key file exists) Your password or leave it empty -l Displaying the SSH key fingerprint (make sure private key file exists) -"},{"location":"ssh/play-with-ssh-keys/#copy-the-public-ssh-key-to-the-server","title":"Copy the public SSH key to the server","text":"<p>You can authenticate yourself to the server without a password (passwordless), but you have to copy your public key to the server. There are multiple ways to do it.</p>"},{"location":"ssh/play-with-ssh-keys/#using-ssh-copy-id-command","title":"Using <code>ssh-copy-id</code> command","text":"<pre><code>ssh-copy-id &lt;username&gt;@&lt;remote-server-ip-address/name&gt;\n\n# You can specify the public key through through \"-i\" option\nssh-copy-id -i &lt;public-key-path&gt; &lt;username&gt;@&lt;remote-server-ip-address/name&gt;\n</code></pre> <p>After you type the remote server password, it will copy your public key from your local file <code>~/.ssh/id_rsa.pub</code> to remote server <code>~/.ssh/authorized_keys</code> file.</p>"},{"location":"ssh/play-with-ssh-keys/#manually-copy-ssh-public-key-from-local-to-a-server","title":"Manually copy SSH public key from local to a server","text":"<pre><code># You can copy your local public key through any methods you like\ncat ~/.ssh/id_rsa.pub\nmkdir -p ~/.ssh\necho \"&lt;public_key&gt;\" &gt;&gt; ~/.ssh/authorized_keys\n\n# combination\ncat ~/.ssh/id_rsa.pub | ssh &lt;username&gt;@&lt;remote-server-ip-address/name&gt; \"mkdir -p ~/.ssh &amp;&amp; cat &gt;&gt; ~/.ssh/authorized_keys\"\n</code></pre>"},{"location":"ssh/play-with-ssh-keys/#using-an-ssh-agent-to-avoid-typing-your-private-key-passphrase","title":"Using an SSH agent to avoid typing your private key passphrase","text":"<p>Assume you had set your private SSH key with a passphrase, but you want to eliminate the typing of the private key passphrase. SSH Agent comes into the play to solve this kind of problem.</p> <p>Once the passphrase is entered for the first time, the SSH agent will store your private key to the agent so you don't have to reenter it again.</p> <pre><code># start SSH agent\neval $(ssh-agent)\n\nssh-add # add your private key to agent, default to id_rsa\nssh-add &lt;private-key-path&gt; # You can specify the private key path\n</code></pre>"},{"location":"ssh/play-with-ssh-keys/#forward-ssh-credentials-to-use-on-a-server","title":"Forward SSH credentials to use on a server","text":"<p>In order to connect to one server without a password from within another, you must forward the SSH key information.</p> <p>Before you proceed, you need to make sure your SSH agent starts and your SSH key is added to the agent (ssh-add).</p> <pre><code># forwards your credentials to the server for this session\nssh -A &lt;username&gt;@&lt;remote-server-ip-address/name&gt;\n</code></pre> <p>This will allow you to SSH into any other host that your SSH key has permission to access because the server that you are connected to right now will \"know\" your private SSH key on this server.</p>"},{"location":"ssh/remote-server-configuration/","title":"Remote Server Connection","text":""},{"location":"ssh/remote-server-configuration/#connecting-to-a-remote-server","title":"Connecting to a remote server","text":"<pre><code>ssh &lt;remote-host-ip-address/name&gt; # Your local machine username is same as on the remote server\nssh &lt;username&gt;@&lt;remote-host-ip-address/name&gt; # specify your username if it is different\nssh -p &lt;port-number&gt; &lt;username&gt;@&lt;remote-host-ip-address/name&gt; # specify different port number\nssh -v &lt;username&gt;@&lt;remote-host-ip-address/name&gt; # get the verbose information\n\n# running a single command on a remote host instead of spawning a shell session\n# After the command is completed running, the connection will straightaway close\nssh &lt;username&gt;@&lt;remote-host-ip-address/name&gt; &lt;command-to-run&gt;\nssh &lt;username&gt;@&lt;remote-host-ip-address/name&gt; ls -la\n</code></pre> Parameters Description Example -p Port Number 2222 -v More information (Verbose) - <p>When you SSH to a server, it will prompt you whether you want to connect by showing the fingerprint. It will save the fingerprint to known_hosts file.</p> Info <p>To simplify the connection process, you can create a Host specific configuration file.</p>"},{"location":"ssh/remote-server-configuration/#known_hosts","title":"known_hosts","text":"Info <p>It will generate a <code>known_hosts</code> file in your local <code>~/.ssh</code> directory.</p> <p>A fingerprint will be displayed when you SSH to a server. If you put \"yes\", the system will save the fingerprint to your local <code>~/.ssh/known_hosts</code> file, so you won't have to enter the same thing again next time.</p> <p>As a result, it can help to prevent the man-in-the-middle-attack.</p>"},{"location":"ssh/remote-tunneling/","title":"Remote Tunneling","text":""},{"location":"ssh/remote-tunneling/#remote-tunneling-to-a-server","title":"Remote tunneling to a server","text":"Info <p>The concept is same as local tunneling.</p> <p>A remote tunnel makes a connection to a remote server. The remote port must be specified when creating the remote tunnel. As a result, the remote computer able to connect or access your localhost. To establish a remote tunnel to your remote server, use <code>-R</code> parameter when connecting and must provide</p> <ul> <li>Remote port for accessing the tunneled connection</li> <li>Local host IP/name</li> <li>Local host port</li> </ul> <p>For general usage, connect to <code>localhost</code> on port 8080 on our local computer, then your remote machine is able to ping or make the connetion to the localhost through port 8080.</p> <pre><code>ssh -f -N -R &lt;remote-port&gt;:&lt;local-host-ip-address/name&gt;:&lt;local-port&gt; &lt;username&gt;@&lt;remote-host-ip-address/name/gateway&gt;\n# example\nssh -R 8080:localhost:8080 user@remote-host-ip-address/gateway\n</code></pre> <p>Now if you go to your remote browser/curl to <code>localhost:8080</code>, you are able to see the content that hosted at <code>localhost:80</code>.</p> Parameters Description -R establish a remote tunnel to your remote server"},{"location":"ssh/remote-tunneling/#remote-tunneling-local-network","title":"Remote tunneling local network","text":"<p>You can tunnel your local network to remote host. Here is the animation diagram of the local network web server and common SSH server.</p> <p>Here is the animation diagram of the local network web server and common SSH server.</p> <pre><code>ssh -R 8080:localhost:8080 user@remote-host-ip-address/gateway\nssh -R 0.0.0.0:8080:localhost:8080 user@remote-host-ip-address/gateway\n</code></pre>"},{"location":"ssh/remote-tunneling/#remote-tunneling-private-network","title":"Remote tunneling private network","text":"<p>You can tunnel your local private network to remote host. Here is the animation diagram of the private network web server and common SSH server.</p> <pre><code>ssh -R 8080:&lt;local-server-ip-address&gt;:8080 user@remote-host-ip-address/gateway\nssh -R 0.0.0.0:8080:&lt;local-server-ip-address&gt;:8080 user@remote-host-ip-address/gateway\n</code></pre>"},{"location":"ssh/server-configuration/","title":"Server Configuration","text":""},{"location":"ssh/server-configuration/#disable-password-authentication","title":"Disable password authentication","text":"<p>If you have set up your SSH keys, then my advice is to disable password authentication, as passwordless is more secure than password authentication.</p> <ol> <li> <p>Go to your remote server, find, and edit <code>/etc/ssh/sshd_config</code>.</p> <pre><code>sudo nano /etc/ssh/sshd_config\n</code></pre> </li> <li> <p>Search for <code>PasswordAuthentication</code> text and set it to \"no\".</p> sshd_config<pre><code>PasswordAuthentication no\n</code></pre> </li> <li> <p>Restart the SSH service</p> <pre><code>sudo service ssh restart\n</code></pre> </li> </ol>"},{"location":"ssh/server-configuration/#change-ssh-daemon-runslistens-on-port","title":"Change SSH Daemon runs/listens on port","text":"<p>By default, SSH Daemon runs/listens on port 22. You can change it as well.</p> <ol> <li> <p>Go to your remote server, find, and open <code>/etc/ssh/sshd_config</code>.</p> <pre><code>sudo nano /etc/ssh/sshd_config\n</code></pre> </li> <li> <p>Search for <code>Port</code> text and edit it based on your needs</p> sshd_config<pre><code>#Port 22\nPort 1234\n</code></pre> </li> <li> <p>Restart the SSH service     <pre><code>sudo service ssh restart\n</code></pre></p> </li> </ol>"},{"location":"ssh/server-configuration/#limit-authenticate-users-to-login","title":"Limit authenticate users to login","text":"<ol> <li> <p>Go to your remote server, find, and open <code>/etc/ssh/sshd_config</code>.</p> <pre><code>sudo nano /etc/ssh/sshd_config\n</code></pre> </li> <li> <p>Search for <code>AllowUsers</code> or <code>AllowGroups</code>, if not found, then create it anywhere. Either one should be fine, or you want to implement both too.</p> sshd_config<pre><code>AllowUsers user1 user2 user3\nAllowGroups groupname\n</code></pre> </li> <li> <p>Restart the SSH service</p> <pre><code>sudo service ssh restart\n</code></pre> </li> </ol>"},{"location":"ssh/server-configuration/#disable-root-login","title":"Disable root login","text":"<p>It is a good practice to disable root login</p> <ol> <li> <p>Go to your remote server, find, and open <code>/etc/ssh/sshd_config</code>.</p> <pre><code>sudo nano /etc/ssh/sshd_config\n</code></pre> </li> <li> <p>Search for <code>PermitRootLogin</code> text and set it to \"no\".</p> sshd_config<pre><code>PermitRootLogin no\n</code></pre> </li> <li> <p>Restart the SSH service</p> <pre><code>sudo service ssh restart\n</code></pre> </li> </ol>"},{"location":"ssh/ssh-installation/","title":"SSH Installation","text":"More Information <p>For Windows Users: Enable WSL and SSH into Windows with Bash. Get started with OpenSSH for Windows</p>"},{"location":"ssh/ssh-installation/#install-ssh-on-linux","title":"Install SSH on Linux","text":"<pre><code>sudo apt-get update\nsudo apt-get install -y openssh-client openssh-server\nsudo systemctl enable ssh\nsudo systemctl start ssh\n\n# you can trigger either one will do\nsudo systemctl status ssh\nsudo systemctl status sshd\n</code></pre> <p>You can find all the files under <code>/home/&lt;username&gt;/.ssh</code></p>"},{"location":"ssh/ssh-overview/","title":"SSH Overview","text":""},{"location":"ssh/ssh-overview/#what-is-ssh","title":"What is SSH?","text":"<p>SSH stands for Secure Shell (SSH) Protocol that is mainly used to connect to a Linux server remotely. Basically, it gives you the opportunity to access a server/computer over an unsecured network.</p>"},{"location":"ssh/ssh-overview/#how-ssh-works","title":"How SSH Works?","text":"<p>Client-server architecture is used to implement SSH connections. The remote machine (Server) must be running SSH daemon (The heart of SSH). In SSH, a specific network port (22) is used for connection requests, authentication, and login into shell sessions when the user provides the correct credentials.</p>"},{"location":"ssh/ssh-overview/#how-ssh-authenticate-users","title":"How SSH Authenticate Users?","text":"<p>We can use passwords or SSH keys to authenticate the right users to login.</p>"},{"location":"ssh/ssh-overview/#password","title":"Password","text":"<p>It is not recommended to use passwords to log in, as when the malicious users or bots will keep repeatedly trying to authenticate their accounts, it might potentially lead to security compromises although password logins are encrypted. Therefore, it is less secure compared to SSH Keys.</p>"},{"location":"ssh/ssh-overview/#ssh-keys","title":"SSH Keys","text":"<p>The SSH keys consist of both public and private cryptographic keys. For the public key, the user can share with anyone freely without any concerns, while the private key must be stored in a secure way and cannot be exposed to anyone.</p> <p></p> <p>Steps to authenticate;</p> <ol> <li>The clients must have an SSH key pair (public and private) on their local computers.</li> <li>The local client's public key must be copied to the user's home directory at <code>~/.ssh/authorized_keys</code> on the remote server.</li> <li>When the client connects to the host/server, it will inform the server which public key to use to authenticate.</li> <li>The server will validate the public key from <code>~/.ssh/authorized_keys</code> file, if it is valid, then it will generate a random string and encrypt it using the public key.</li> <li>The server will send the encrypted message to the client to test whether the client has the associated private key.</li> <li>After receiving an encrypted message from the server, the client will use the client's private key to decrypt and send the decrypted information back to the server.</li> <li>Lastly,the client is able to log into shell sessions when the server determines that the client has the associated private key by validating the decrypted information is correct.</li> </ol>"}]}